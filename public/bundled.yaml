openapi: 3.1.0
info:
  title: Portfolio API
  version: 1.0.0
  description: |
    REST API for portfolios
servers:
  - url: http://localhost:8080
    description: Local development server
security:
  - bearerAuth: []
tags:
  - name: Auth
    description: User signup & login
  - name: Users
    description: User profile and admin user management
  - name: Portfolios
    description: Manage investment portfolios
  - name: Portfolio Stocks
    description: Add/remove stocks within a portfolio
  - name: Stocks
    description: Stock data (admin CRUD)
  - name: Watchlists
    description: Manage personal watchlists & their stocks
paths:
  /api/auth/signup:
    paths:
      /api/auth/signup:
        post:
          tags:
            - Auth
          summary: User signup
          description: Create a new user account.
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  required:
                    - email
                    - password
                  properties:
                    email:
                      type: string
                      example: user@example.com
                    password:
                      type: string
                      example: Password123!
          responses:
            '201':
              description: User successfully created
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      message:
                        type: string
                        example: New user created with id of 3
            '400':
              description: Validation error
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
      /api/auth/login:
        post:
          tags:
            - Auth
          summary: User login
          description: Log in and receive an access token.
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  required:
                    - email
                    - password
                  properties:
                    email:
                      type: string
                      example: user@example.com
                    password:
                      type: string
                      example: Password123!
          responses:
            '200':
              description: Successfully logged in
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      accessToken:
                        type: string
                        example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
            '400':
              description: Validation error
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Invalid credentials
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
  /api/auth/login:
    paths:
      /api/auth/signup:
        post:
          tags:
            - Auth
          summary: User signup
          description: Create a new user account.
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  required:
                    - email
                    - password
                  properties:
                    email:
                      type: string
                      example: user@example.com
                    password:
                      type: string
                      example: Password123!
          responses:
            '201':
              description: User successfully created
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      message:
                        type: string
                        example: New user created with id of 3
            '400':
              description: Validation error
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
      /api/auth/login:
        post:
          tags:
            - Auth
          summary: User login
          description: Log in and receive an access token.
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  required:
                    - email
                    - password
                  properties:
                    email:
                      type: string
                      example: user@example.com
                    password:
                      type: string
                      example: Password123!
          responses:
            '200':
              description: Successfully logged in
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      accessToken:
                        type: string
                        example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
            '400':
              description: Validation error
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Invalid credentials
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
  /api/users:
    paths:
      /api/users/profile/{id}:
        get:
          tags:
            - Users
          summary: Get user profile
          description: Retrieve a user by ID (owner only).
          security:
            - bearerAuth: []
          parameters:
            - name: id
              in: path
              required: true
              description: User ID
              schema:
                type: integer
                example: 3
          responses:
            '200':
              description: User profile retrieved successfully
              content:
                application/json:
                  schema:
                    $ref: ../schemas/User.yaml
            '400':
              description: Invalid user ID
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — cannot access another user's profile
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
            '404':
              description: User not found
              content:
                application/json:
                  schema:
                    $ref: ../components/NotFoundError.yaml
        put:
          tags:
            - Users
          summary: Update user profile
          description: Update the authenticated user's email or password.
          security:
            - bearerAuth: []
          parameters:
            - name: id
              in: path
              required: true
              description: User ID
              schema:
                type: integer
                example: 3
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    email:
                      type: string
                      example: updatedEmail@example.com
                    password:
                      type: string
                      example: NewPassword123!
          responses:
            '200':
              description: User successfully updated
              content:
                application/json:
                  schema:
                    $ref: ../schemas/User.yaml
            '400':
              description: Validation error
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — cannot update another user's profile
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
        delete:
          tags:
            - Users
          summary: Delete the user account
          description: Delete a user account (owner only).
          security:
            - bearerAuth: []
          parameters:
            - name: id
              in: path
              required: true
              description: User ID
              schema:
                type: integer
                example: 3
          responses:
            '204':
              description: User deleted successfully
            '400':
              description: Invalid ID
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — cannot delete another user's account
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
  /api/users/profile/{id}:
    paths:
      /api/users/profile/{id}:
        get:
          tags:
            - Users
          summary: Get user profile
          description: Retrieve a user by ID (owner only).
          security:
            - bearerAuth: []
          parameters:
            - name: id
              in: path
              required: true
              description: User ID
              schema:
                type: integer
                example: 3
          responses:
            '200':
              description: User profile retrieved successfully
              content:
                application/json:
                  schema:
                    $ref: ../schemas/User.yaml
            '400':
              description: Invalid user ID
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — cannot access another user's profile
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
            '404':
              description: User not found
              content:
                application/json:
                  schema:
                    $ref: ../components/NotFoundError.yaml
        put:
          tags:
            - Users
          summary: Update user profile
          description: Update the authenticated user's email or password.
          security:
            - bearerAuth: []
          parameters:
            - name: id
              in: path
              required: true
              description: User ID
              schema:
                type: integer
                example: 3
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    email:
                      type: string
                      example: updatedEmail@example.com
                    password:
                      type: string
                      example: NewPassword123!
          responses:
            '200':
              description: User successfully updated
              content:
                application/json:
                  schema:
                    $ref: ../schemas/User.yaml
            '400':
              description: Validation error
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — cannot update another user's profile
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
        delete:
          tags:
            - Users
          summary: Delete the user account
          description: Delete a user account (owner only).
          security:
            - bearerAuth: []
          parameters:
            - name: id
              in: path
              required: true
              description: User ID
              schema:
                type: integer
                example: 3
          responses:
            '204':
              description: User deleted successfully
            '400':
              description: Invalid ID
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — cannot delete another user's account
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
  /api/portfolios:
    paths:
      /api/portfolios:
        get:
          tags:
            - Portfolios
          summary: Get all portfolios for the authenticated user
          security:
            - bearerAuth: []
          description: Returns a list of portfolios owned by the authenticated user.
          responses:
            '200':
              description: List of portfolios
              content:
                application/json:
                  schema:
                    type: array
                    items:
                      $ref: ../schemas/Portfolio.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
        post:
          tags:
            - Portfolios
          summary: Create a new portfolio
          security:
            - bearerAuth: []
          description: Create a portfolio belonging to the authenticated user.
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  required:
                    - name
                  properties:
                    name:
                      type: string
                      example: Tech Growth Portfolio
          responses:
            '201':
              description: Portfolio created
              content:
                application/json:
                  schema:
                    $ref: ../schemas/Portfolio.yaml
            '400':
              description: Validation error
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
      /api/portfolios/{id}:
        get:
          tags:
            - Portfolios
          summary: Get a portfolio by ID
          security:
            - bearerAuth: []
          description: Retrieves a single portfolio owned by the authenticated user.
          parameters:
            - name: id
              in: path
              required: true
              schema:
                type: integer
                example: 10
          responses:
            '200':
              description: Portfolio retrieved successfully
              content:
                application/json:
                  schema:
                    $ref: ../schemas/Portfolio.yaml
            '400':
              description: Invalid ID format
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — user does not own this portfolio
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
            '404':
              description: Portfolio not found
              content:
                application/json:
                  schema:
                    $ref: ../components/NotFoundError.yaml
        put:
          tags:
            - Portfolios
          summary: Update a portfolio
          security:
            - bearerAuth: []
          description: Update the name of a portfolio owned by the authenticated user.
          parameters:
            - name: id
              in: path
              required: true
              schema:
                type: integer
                example: 10
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  required:
                    - name
                  properties:
                    name:
                      type: string
                      example: Updated Portfolio Name
          responses:
            '200':
              description: Portfolio updated successfully
              content:
                application/json:
                  schema:
                    $ref: ../schemas/Portfolio.yaml
            '400':
              description: Validation failure or invalid ID
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — user does not own this portfolio
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
        delete:
          tags:
            - Portfolios
          summary: Delete a portfolio
          security:
            - bearerAuth: []
          description: Delete a portfolio owned by the authenticated user.
          parameters:
            - name: id
              in: path
              required: true
              schema:
                type: integer
                example: 10
          responses:
            '204':
              description: Portfolio deleted successfully
            '400':
              description: Invalid ID
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — user does not own this portfolio
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
  /api/portfolios/{id}:
    paths:
      /api/portfolios:
        get:
          tags:
            - Portfolios
          summary: Get all portfolios for the authenticated user
          security:
            - bearerAuth: []
          description: Returns a list of portfolios owned by the authenticated user.
          responses:
            '200':
              description: List of portfolios
              content:
                application/json:
                  schema:
                    type: array
                    items:
                      $ref: ../schemas/Portfolio.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
        post:
          tags:
            - Portfolios
          summary: Create a new portfolio
          security:
            - bearerAuth: []
          description: Create a portfolio belonging to the authenticated user.
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  required:
                    - name
                  properties:
                    name:
                      type: string
                      example: Tech Growth Portfolio
          responses:
            '201':
              description: Portfolio created
              content:
                application/json:
                  schema:
                    $ref: ../schemas/Portfolio.yaml
            '400':
              description: Validation error
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
      /api/portfolios/{id}:
        get:
          tags:
            - Portfolios
          summary: Get a portfolio by ID
          security:
            - bearerAuth: []
          description: Retrieves a single portfolio owned by the authenticated user.
          parameters:
            - name: id
              in: path
              required: true
              schema:
                type: integer
                example: 10
          responses:
            '200':
              description: Portfolio retrieved successfully
              content:
                application/json:
                  schema:
                    $ref: ../schemas/Portfolio.yaml
            '400':
              description: Invalid ID format
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — user does not own this portfolio
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
            '404':
              description: Portfolio not found
              content:
                application/json:
                  schema:
                    $ref: ../components/NotFoundError.yaml
        put:
          tags:
            - Portfolios
          summary: Update a portfolio
          security:
            - bearerAuth: []
          description: Update the name of a portfolio owned by the authenticated user.
          parameters:
            - name: id
              in: path
              required: true
              schema:
                type: integer
                example: 10
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  required:
                    - name
                  properties:
                    name:
                      type: string
                      example: Updated Portfolio Name
          responses:
            '200':
              description: Portfolio updated successfully
              content:
                application/json:
                  schema:
                    $ref: ../schemas/Portfolio.yaml
            '400':
              description: Validation failure or invalid ID
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — user does not own this portfolio
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
        delete:
          tags:
            - Portfolios
          summary: Delete a portfolio
          security:
            - bearerAuth: []
          description: Delete a portfolio owned by the authenticated user.
          parameters:
            - name: id
              in: path
              required: true
              schema:
                type: integer
                example: 10
          responses:
            '204':
              description: Portfolio deleted successfully
            '400':
              description: Invalid ID
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — user does not own this portfolio
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
  /api/portfolios/{id}/stocks:
    paths:
      /api/portfolios/{id}/stocks:
        get:
          tags:
            - Portfolio Stocks
          summary: Get all stocks in a portfolio
          security:
            - bearerAuth: []
          description: Returns a list of stocks belonging to the specified portfolio, if owned by the authenticated user.
          parameters:
            - name: id
              in: path
              required: true
              description: Portfolio ID
              schema:
                type: integer
                example: 10
          responses:
            '200':
              description: List of stocks in the portfolio
              content:
                application/json:
                  schema:
                    type: array
                    items:
                      $ref: ../schemas/Stock.yaml
            '400':
              description: Invalid portfolio ID
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — not the owner of this portfolio
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
            '404':
              description: Portfolio not found
              content:
                application/json:
                  schema:
                    $ref: ../components/NotFoundError.yaml
        post:
          tags:
            - Portfolio Stocks
          summary: Add a stock to a portfolio
          security:
            - bearerAuth: []
          description: Adds a stock (by ID) to the portfolio if owned by the authenticated user.
          parameters:
            - name: id
              in: path
              required: true
              description: Portfolio ID
              schema:
                type: integer
                example: 10
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  required:
                    - stockId
                  properties:
                    stockId:
                      type: integer
                      example: 5
          responses:
            '201':
              description: Stock added to the portfolio
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      message:
                        type: string
                        example: Stock AAPL added to portfolio
            '400':
              description: Validation error or invalid ID format
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — not the owner of this portfolio
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
            '404':
              description: Portfolio or stock not found
              content:
                application/json:
                  schema:
                    $ref: ../components/NotFoundError.yaml
      /api/portfolios/{id}/stocks/{stockId}:
        delete:
          tags:
            - Portfolio Stocks
          summary: Remove a stock from a portfolio
          security:
            - bearerAuth: []
          description: Deletes a stock from the portfolio if owned by the authenticated user.
          parameters:
            - name: id
              in: path
              required: true
              description: Portfolio ID
              schema:
                type: integer
                example: 10
            - name: stockId
              in: path
              required: true
              description: Stock ID
              schema:
                type: integer
                example: 5
          responses:
            '204':
              description: Stock removed successfully
            '400':
              description: Invalid ID format
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — not the owner of this portfolio
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
            '404':
              description: Portfolio or stock not found
              content:
                application/json:
                  schema:
                    $ref: ../components/NotFoundError.yaml
  /api/portfolios/{id}/stocks/{stockId}:
    paths:
      /api/portfolios/{id}/stocks:
        get:
          tags:
            - Portfolio Stocks
          summary: Get all stocks in a portfolio
          security:
            - bearerAuth: []
          description: Returns a list of stocks belonging to the specified portfolio, if owned by the authenticated user.
          parameters:
            - name: id
              in: path
              required: true
              description: Portfolio ID
              schema:
                type: integer
                example: 10
          responses:
            '200':
              description: List of stocks in the portfolio
              content:
                application/json:
                  schema:
                    type: array
                    items:
                      $ref: ../schemas/Stock.yaml
            '400':
              description: Invalid portfolio ID
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — not the owner of this portfolio
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
            '404':
              description: Portfolio not found
              content:
                application/json:
                  schema:
                    $ref: ../components/NotFoundError.yaml
        post:
          tags:
            - Portfolio Stocks
          summary: Add a stock to a portfolio
          security:
            - bearerAuth: []
          description: Adds a stock (by ID) to the portfolio if owned by the authenticated user.
          parameters:
            - name: id
              in: path
              required: true
              description: Portfolio ID
              schema:
                type: integer
                example: 10
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  required:
                    - stockId
                  properties:
                    stockId:
                      type: integer
                      example: 5
          responses:
            '201':
              description: Stock added to the portfolio
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      message:
                        type: string
                        example: Stock AAPL added to portfolio
            '400':
              description: Validation error or invalid ID format
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — not the owner of this portfolio
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
            '404':
              description: Portfolio or stock not found
              content:
                application/json:
                  schema:
                    $ref: ../components/NotFoundError.yaml
      /api/portfolios/{id}/stocks/{stockId}:
        delete:
          tags:
            - Portfolio Stocks
          summary: Remove a stock from a portfolio
          security:
            - bearerAuth: []
          description: Deletes a stock from the portfolio if owned by the authenticated user.
          parameters:
            - name: id
              in: path
              required: true
              description: Portfolio ID
              schema:
                type: integer
                example: 10
            - name: stockId
              in: path
              required: true
              description: Stock ID
              schema:
                type: integer
                example: 5
          responses:
            '204':
              description: Stock removed successfully
            '400':
              description: Invalid ID format
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — not the owner of this portfolio
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
            '404':
              description: Portfolio or stock not found
              content:
                application/json:
                  schema:
                    $ref: ../components/NotFoundError.yaml
  /api/stocks:
    paths:
      /api/stocks:
        get:
          tags:
            - Stocks
          summary: Get all stocks
          description: Returns a list of all available stocks.
          responses:
            '200':
              description: List of all stocks
              content:
                application/json:
                  schema:
                    type: array
                    items:
                      $ref: ../schemas/Stock.yaml
        post:
          tags:
            - Stocks
          summary: Create a new stock (Admin only)
          security:
            - bearerAuth: []
          description: Creates a new stock entry. Admin privileges required.
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  required:
                    - symbol
                    - name
                    - sector
                  properties:
                    symbol:
                      type: string
                      example: AAPL
                    name:
                      type: string
                      example: Apple Inc.
                    sector:
                      type: string
                      example: Technology
          responses:
            '201':
              description: Stock created successfully
              content:
                application/json:
                  schema:
                    $ref: ../schemas/Stock.yaml
            '400':
              description: Validation error
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — Admin privileges required
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
      /api/stocks/{id}:
        get:
          tags:
            - Stocks
          summary: Get a stock by ID
          description: Retrieve a stock by its ID.
          parameters:
            - name: id
              in: path
              required: true
              description: Stock ID
              schema:
                type: integer
                example: 101
          responses:
            '200':
              description: Stock retrieved successfully
              content:
                application/json:
                  schema:
                    $ref: ../schemas/Stock.yaml
            '400':
              description: Invalid stock ID
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '404':
              description: Stock not found
              content:
                application/json:
                  schema:
                    $ref: ../components/NotFoundError.yaml
        put:
          tags:
            - Stocks
          summary: Update a stock (Admin only)
          security:
            - bearerAuth: []
          description: Updates an existing stock's attributes. Admin privileges required.
          parameters:
            - name: id
              in: path
              required: true
              description: Stock ID
              schema:
                type: integer
                example: 101
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  required:
                    - symbol
                    - name
                    - sector
                  properties:
                    symbol:
                      type: string
                      example: AAPL
                    name:
                      type: string
                      example: Apple Inc.
                    sector:
                      type: string
                      example: Technology
          responses:
            '200':
              description: Stock updated successfully
              content:
                application/json:
                  schema:
                    $ref: ../schemas/Stock.yaml
            '400':
              description: Validation error or invalid ID
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — Admin privileges required
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
        delete:
          tags:
            - Stocks
          summary: Delete a stock (Admin only)
          security:
            - bearerAuth: []
          description: Deletes a stock by ID. Admin privileges required.
          parameters:
            - name: id
              in: path
              required: true
              description: Stock ID
              schema:
                type: integer
                example: 101
          responses:
            '204':
              description: Stock deleted successfully
            '400':
              description: Invalid ID
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — Admin privileges required
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
  /api/stocks/{id}:
    paths:
      /api/stocks:
        get:
          tags:
            - Stocks
          summary: Get all stocks
          description: Returns a list of all available stocks.
          responses:
            '200':
              description: List of all stocks
              content:
                application/json:
                  schema:
                    type: array
                    items:
                      $ref: ../schemas/Stock.yaml
        post:
          tags:
            - Stocks
          summary: Create a new stock (Admin only)
          security:
            - bearerAuth: []
          description: Creates a new stock entry. Admin privileges required.
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  required:
                    - symbol
                    - name
                    - sector
                  properties:
                    symbol:
                      type: string
                      example: AAPL
                    name:
                      type: string
                      example: Apple Inc.
                    sector:
                      type: string
                      example: Technology
          responses:
            '201':
              description: Stock created successfully
              content:
                application/json:
                  schema:
                    $ref: ../schemas/Stock.yaml
            '400':
              description: Validation error
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — Admin privileges required
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
      /api/stocks/{id}:
        get:
          tags:
            - Stocks
          summary: Get a stock by ID
          description: Retrieve a stock by its ID.
          parameters:
            - name: id
              in: path
              required: true
              description: Stock ID
              schema:
                type: integer
                example: 101
          responses:
            '200':
              description: Stock retrieved successfully
              content:
                application/json:
                  schema:
                    $ref: ../schemas/Stock.yaml
            '400':
              description: Invalid stock ID
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '404':
              description: Stock not found
              content:
                application/json:
                  schema:
                    $ref: ../components/NotFoundError.yaml
        put:
          tags:
            - Stocks
          summary: Update a stock (Admin only)
          security:
            - bearerAuth: []
          description: Updates an existing stock's attributes. Admin privileges required.
          parameters:
            - name: id
              in: path
              required: true
              description: Stock ID
              schema:
                type: integer
                example: 101
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  required:
                    - symbol
                    - name
                    - sector
                  properties:
                    symbol:
                      type: string
                      example: AAPL
                    name:
                      type: string
                      example: Apple Inc.
                    sector:
                      type: string
                      example: Technology
          responses:
            '200':
              description: Stock updated successfully
              content:
                application/json:
                  schema:
                    $ref: ../schemas/Stock.yaml
            '400':
              description: Validation error or invalid ID
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — Admin privileges required
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
        delete:
          tags:
            - Stocks
          summary: Delete a stock (Admin only)
          security:
            - bearerAuth: []
          description: Deletes a stock by ID. Admin privileges required.
          parameters:
            - name: id
              in: path
              required: true
              description: Stock ID
              schema:
                type: integer
                example: 101
          responses:
            '204':
              description: Stock deleted successfully
            '400':
              description: Invalid ID
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — Admin privileges required
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
  /api/watchlists:
    paths:
      /api/watchlists:
        get:
          tags:
            - Watchlists
          summary: Get all watchlists for the authenticated user
          security:
            - bearerAuth: []
          description: Returns a list of watchlists owned by the authenticated user.
          responses:
            '200':
              description: List of watchlists
              content:
                application/json:
                  schema:
                    type: array
                    items:
                      $ref: ../schemas/Watchlist.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
        post:
          tags:
            - Watchlists
          summary: Create a new watchlist
          security:
            - bearerAuth: []
          description: Creates a new watchlist owned by the authenticated user.
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  required:
                    - name
                  properties:
                    name:
                      type: string
                      example: Tech Watchlist
          responses:
            '201':
              description: Watchlist created successfully
              content:
                application/json:
                  schema:
                    $ref: ../schemas/Watchlist.yaml
            '400':
              description: Validation error
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
      /api/watchlists/{id}:
        get:
          tags:
            - Watchlists
          summary: Get a watchlist by ID
          security:
            - bearerAuth: []
          description: Retrieve a watchlist owned by the authenticated user.
          parameters:
            - name: id
              in: path
              required: true
              description: Watchlist ID
              schema:
                type: integer
                example: 3
          responses:
            '200':
              description: Watchlist retrieved successfully
              content:
                application/json:
                  schema:
                    $ref: ../schemas/Watchlist.yaml
            '400':
              description: Invalid ID format
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — user does not own this watchlist
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
            '404':
              description: Watchlist not found
              content:
                application/json:
                  schema:
                    $ref: ../components/NotFoundError.yaml
        put:
          tags:
            - Watchlists
          summary: Update a watchlist
          security:
            - bearerAuth: []
          description: Update the name of a watchlist owned by the authenticated user.
          parameters:
            - name: id
              in: path
              required: true
              schema:
                type: integer
                example: 3
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  required:
                    - name
                  properties:
                    name:
                      type: string
                      example: Updated Watchlist Name
          responses:
            '200':
              description: Watchlist updated
              content:
                application/json:
                  schema:
                    $ref: ../schemas/Watchlist.yaml
            '400':
              description: Validation error or invalid ID
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — cannot update another user's watchlist
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
        delete:
          tags:
            - Watchlists
          summary: Delete a watchlist
          security:
            - bearerAuth: []
          description: Delete a watchlist owned by the authenticated user.
          parameters:
            - name: id
              in: path
              required: true
              schema:
                type: integer
                example: 3
          responses:
            '204':
              description: Watchlist deleted successfully
            '400':
              description: Invalid ID
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — cannot delete another user's watchlist
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
      /api/watchlists/{id}/stocks:
        get:
          tags:
            - Watchlists
          summary: Get all stocks in a watchlist
          security:
            - bearerAuth: []
          description: Returns all stocks for a specific watchlist owned by the authenticated user.
          parameters:
            - name: id
              in: path
              required: true
              description: Watchlist ID
              schema:
                type: integer
                example: 3
          responses:
            '200':
              description: List of stocks in the watchlist
              content:
                application/json:
                  schema:
                    type: array
                    items:
                      $ref: ../schemas/Stock.yaml
            '400':
              description: Invalid watchlist ID
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — user does not own this watchlist
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
            '404':
              description: Watchlist not found
              content:
                application/json:
                  schema:
                    $ref: ../components/NotFoundError.yaml
        post:
          tags:
            - Watchlists
          summary: Add a stock to a watchlist
          security:
            - bearerAuth: []
          description: Adds a stock to a watchlist if owned by the authenticated user.
          parameters:
            - name: id
              in: path
              required: true
              description: Watchlist ID
              schema:
                type: integer
                example: 3
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  required:
                    - stockId
                  properties:
                    stockId:
                      type: integer
                      example: 5
          responses:
            '201':
              description: Stock added to watchlist
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      message:
                        type: string
                        example: Stock AAPL added to watchlist
            '400':
              description: Invalid ID or validation error
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — cannot modify another user's watchlist
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
            '404':
              description: Watchlist or stock not found
              content:
                application/json:
                  schema:
                    $ref: ../components/NotFoundError.yaml
      /api/watchlists/{id}/stocks/{stockId}:
        delete:
          tags:
            - Watchlists
          summary: Remove a stock from a watchlist
          security:
            - bearerAuth: []
          description: Deletes a stock from the watchlist if owned by the authenticated user.
          parameters:
            - name: id
              in: path
              required: true
              description: Watchlist ID
              schema:
                type: integer
                example: 3
            - name: stockId
              in: path
              required: true
              description: Stock ID
              schema:
                type: integer
                example: 5
          responses:
            '204':
              description: Stock removed successfully
            '400':
              description: Invalid ID format
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — cannot modify another user's watchlist
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
            '404':
              description: Watchlist or stock not found
              content:
                application/json:
                  schema:
                    $ref: ../components/NotFoundError.yaml
  /api/watchlists/{id}:
    paths:
      /api/watchlists:
        get:
          tags:
            - Watchlists
          summary: Get all watchlists for the authenticated user
          security:
            - bearerAuth: []
          description: Returns a list of watchlists owned by the authenticated user.
          responses:
            '200':
              description: List of watchlists
              content:
                application/json:
                  schema:
                    type: array
                    items:
                      $ref: ../schemas/Watchlist.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
        post:
          tags:
            - Watchlists
          summary: Create a new watchlist
          security:
            - bearerAuth: []
          description: Creates a new watchlist owned by the authenticated user.
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  required:
                    - name
                  properties:
                    name:
                      type: string
                      example: Tech Watchlist
          responses:
            '201':
              description: Watchlist created successfully
              content:
                application/json:
                  schema:
                    $ref: ../schemas/Watchlist.yaml
            '400':
              description: Validation error
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
      /api/watchlists/{id}:
        get:
          tags:
            - Watchlists
          summary: Get a watchlist by ID
          security:
            - bearerAuth: []
          description: Retrieve a watchlist owned by the authenticated user.
          parameters:
            - name: id
              in: path
              required: true
              description: Watchlist ID
              schema:
                type: integer
                example: 3
          responses:
            '200':
              description: Watchlist retrieved successfully
              content:
                application/json:
                  schema:
                    $ref: ../schemas/Watchlist.yaml
            '400':
              description: Invalid ID format
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — user does not own this watchlist
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
            '404':
              description: Watchlist not found
              content:
                application/json:
                  schema:
                    $ref: ../components/NotFoundError.yaml
        put:
          tags:
            - Watchlists
          summary: Update a watchlist
          security:
            - bearerAuth: []
          description: Update the name of a watchlist owned by the authenticated user.
          parameters:
            - name: id
              in: path
              required: true
              schema:
                type: integer
                example: 3
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  required:
                    - name
                  properties:
                    name:
                      type: string
                      example: Updated Watchlist Name
          responses:
            '200':
              description: Watchlist updated
              content:
                application/json:
                  schema:
                    $ref: ../schemas/Watchlist.yaml
            '400':
              description: Validation error or invalid ID
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — cannot update another user's watchlist
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
        delete:
          tags:
            - Watchlists
          summary: Delete a watchlist
          security:
            - bearerAuth: []
          description: Delete a watchlist owned by the authenticated user.
          parameters:
            - name: id
              in: path
              required: true
              schema:
                type: integer
                example: 3
          responses:
            '204':
              description: Watchlist deleted successfully
            '400':
              description: Invalid ID
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — cannot delete another user's watchlist
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
      /api/watchlists/{id}/stocks:
        get:
          tags:
            - Watchlists
          summary: Get all stocks in a watchlist
          security:
            - bearerAuth: []
          description: Returns all stocks for a specific watchlist owned by the authenticated user.
          parameters:
            - name: id
              in: path
              required: true
              description: Watchlist ID
              schema:
                type: integer
                example: 3
          responses:
            '200':
              description: List of stocks in the watchlist
              content:
                application/json:
                  schema:
                    type: array
                    items:
                      $ref: ../schemas/Stock.yaml
            '400':
              description: Invalid watchlist ID
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — user does not own this watchlist
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
            '404':
              description: Watchlist not found
              content:
                application/json:
                  schema:
                    $ref: ../components/NotFoundError.yaml
        post:
          tags:
            - Watchlists
          summary: Add a stock to a watchlist
          security:
            - bearerAuth: []
          description: Adds a stock to a watchlist if owned by the authenticated user.
          parameters:
            - name: id
              in: path
              required: true
              description: Watchlist ID
              schema:
                type: integer
                example: 3
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  required:
                    - stockId
                  properties:
                    stockId:
                      type: integer
                      example: 5
          responses:
            '201':
              description: Stock added to watchlist
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      message:
                        type: string
                        example: Stock AAPL added to watchlist
            '400':
              description: Invalid ID or validation error
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — cannot modify another user's watchlist
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
            '404':
              description: Watchlist or stock not found
              content:
                application/json:
                  schema:
                    $ref: ../components/NotFoundError.yaml
      /api/watchlists/{id}/stocks/{stockId}:
        delete:
          tags:
            - Watchlists
          summary: Remove a stock from a watchlist
          security:
            - bearerAuth: []
          description: Deletes a stock from the watchlist if owned by the authenticated user.
          parameters:
            - name: id
              in: path
              required: true
              description: Watchlist ID
              schema:
                type: integer
                example: 3
            - name: stockId
              in: path
              required: true
              description: Stock ID
              schema:
                type: integer
                example: 5
          responses:
            '204':
              description: Stock removed successfully
            '400':
              description: Invalid ID format
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — cannot modify another user's watchlist
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
            '404':
              description: Watchlist or stock not found
              content:
                application/json:
                  schema:
                    $ref: ../components/NotFoundError.yaml
  /api/watchlists/{id}/stocks:
    paths:
      /api/watchlists:
        get:
          tags:
            - Watchlists
          summary: Get all watchlists for the authenticated user
          security:
            - bearerAuth: []
          description: Returns a list of watchlists owned by the authenticated user.
          responses:
            '200':
              description: List of watchlists
              content:
                application/json:
                  schema:
                    type: array
                    items:
                      $ref: ../schemas/Watchlist.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
        post:
          tags:
            - Watchlists
          summary: Create a new watchlist
          security:
            - bearerAuth: []
          description: Creates a new watchlist owned by the authenticated user.
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  required:
                    - name
                  properties:
                    name:
                      type: string
                      example: Tech Watchlist
          responses:
            '201':
              description: Watchlist created successfully
              content:
                application/json:
                  schema:
                    $ref: ../schemas/Watchlist.yaml
            '400':
              description: Validation error
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
      /api/watchlists/{id}:
        get:
          tags:
            - Watchlists
          summary: Get a watchlist by ID
          security:
            - bearerAuth: []
          description: Retrieve a watchlist owned by the authenticated user.
          parameters:
            - name: id
              in: path
              required: true
              description: Watchlist ID
              schema:
                type: integer
                example: 3
          responses:
            '200':
              description: Watchlist retrieved successfully
              content:
                application/json:
                  schema:
                    $ref: ../schemas/Watchlist.yaml
            '400':
              description: Invalid ID format
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — user does not own this watchlist
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
            '404':
              description: Watchlist not found
              content:
                application/json:
                  schema:
                    $ref: ../components/NotFoundError.yaml
        put:
          tags:
            - Watchlists
          summary: Update a watchlist
          security:
            - bearerAuth: []
          description: Update the name of a watchlist owned by the authenticated user.
          parameters:
            - name: id
              in: path
              required: true
              schema:
                type: integer
                example: 3
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  required:
                    - name
                  properties:
                    name:
                      type: string
                      example: Updated Watchlist Name
          responses:
            '200':
              description: Watchlist updated
              content:
                application/json:
                  schema:
                    $ref: ../schemas/Watchlist.yaml
            '400':
              description: Validation error or invalid ID
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — cannot update another user's watchlist
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
        delete:
          tags:
            - Watchlists
          summary: Delete a watchlist
          security:
            - bearerAuth: []
          description: Delete a watchlist owned by the authenticated user.
          parameters:
            - name: id
              in: path
              required: true
              schema:
                type: integer
                example: 3
          responses:
            '204':
              description: Watchlist deleted successfully
            '400':
              description: Invalid ID
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — cannot delete another user's watchlist
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
      /api/watchlists/{id}/stocks:
        get:
          tags:
            - Watchlists
          summary: Get all stocks in a watchlist
          security:
            - bearerAuth: []
          description: Returns all stocks for a specific watchlist owned by the authenticated user.
          parameters:
            - name: id
              in: path
              required: true
              description: Watchlist ID
              schema:
                type: integer
                example: 3
          responses:
            '200':
              description: List of stocks in the watchlist
              content:
                application/json:
                  schema:
                    type: array
                    items:
                      $ref: ../schemas/Stock.yaml
            '400':
              description: Invalid watchlist ID
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — user does not own this watchlist
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
            '404':
              description: Watchlist not found
              content:
                application/json:
                  schema:
                    $ref: ../components/NotFoundError.yaml
        post:
          tags:
            - Watchlists
          summary: Add a stock to a watchlist
          security:
            - bearerAuth: []
          description: Adds a stock to a watchlist if owned by the authenticated user.
          parameters:
            - name: id
              in: path
              required: true
              description: Watchlist ID
              schema:
                type: integer
                example: 3
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  required:
                    - stockId
                  properties:
                    stockId:
                      type: integer
                      example: 5
          responses:
            '201':
              description: Stock added to watchlist
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      message:
                        type: string
                        example: Stock AAPL added to watchlist
            '400':
              description: Invalid ID or validation error
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — cannot modify another user's watchlist
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
            '404':
              description: Watchlist or stock not found
              content:
                application/json:
                  schema:
                    $ref: ../components/NotFoundError.yaml
      /api/watchlists/{id}/stocks/{stockId}:
        delete:
          tags:
            - Watchlists
          summary: Remove a stock from a watchlist
          security:
            - bearerAuth: []
          description: Deletes a stock from the watchlist if owned by the authenticated user.
          parameters:
            - name: id
              in: path
              required: true
              description: Watchlist ID
              schema:
                type: integer
                example: 3
            - name: stockId
              in: path
              required: true
              description: Stock ID
              schema:
                type: integer
                example: 5
          responses:
            '204':
              description: Stock removed successfully
            '400':
              description: Invalid ID format
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — cannot modify another user's watchlist
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
            '404':
              description: Watchlist or stock not found
              content:
                application/json:
                  schema:
                    $ref: ../components/NotFoundError.yaml
  /api/watchlists/{id}/stocks/{stockId}:
    paths:
      /api/watchlists:
        get:
          tags:
            - Watchlists
          summary: Get all watchlists for the authenticated user
          security:
            - bearerAuth: []
          description: Returns a list of watchlists owned by the authenticated user.
          responses:
            '200':
              description: List of watchlists
              content:
                application/json:
                  schema:
                    type: array
                    items:
                      $ref: ../schemas/Watchlist.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
        post:
          tags:
            - Watchlists
          summary: Create a new watchlist
          security:
            - bearerAuth: []
          description: Creates a new watchlist owned by the authenticated user.
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  required:
                    - name
                  properties:
                    name:
                      type: string
                      example: Tech Watchlist
          responses:
            '201':
              description: Watchlist created successfully
              content:
                application/json:
                  schema:
                    $ref: ../schemas/Watchlist.yaml
            '400':
              description: Validation error
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
      /api/watchlists/{id}:
        get:
          tags:
            - Watchlists
          summary: Get a watchlist by ID
          security:
            - bearerAuth: []
          description: Retrieve a watchlist owned by the authenticated user.
          parameters:
            - name: id
              in: path
              required: true
              description: Watchlist ID
              schema:
                type: integer
                example: 3
          responses:
            '200':
              description: Watchlist retrieved successfully
              content:
                application/json:
                  schema:
                    $ref: ../schemas/Watchlist.yaml
            '400':
              description: Invalid ID format
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — user does not own this watchlist
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
            '404':
              description: Watchlist not found
              content:
                application/json:
                  schema:
                    $ref: ../components/NotFoundError.yaml
        put:
          tags:
            - Watchlists
          summary: Update a watchlist
          security:
            - bearerAuth: []
          description: Update the name of a watchlist owned by the authenticated user.
          parameters:
            - name: id
              in: path
              required: true
              schema:
                type: integer
                example: 3
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  required:
                    - name
                  properties:
                    name:
                      type: string
                      example: Updated Watchlist Name
          responses:
            '200':
              description: Watchlist updated
              content:
                application/json:
                  schema:
                    $ref: ../schemas/Watchlist.yaml
            '400':
              description: Validation error or invalid ID
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — cannot update another user's watchlist
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
        delete:
          tags:
            - Watchlists
          summary: Delete a watchlist
          security:
            - bearerAuth: []
          description: Delete a watchlist owned by the authenticated user.
          parameters:
            - name: id
              in: path
              required: true
              schema:
                type: integer
                example: 3
          responses:
            '204':
              description: Watchlist deleted successfully
            '400':
              description: Invalid ID
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — cannot delete another user's watchlist
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
      /api/watchlists/{id}/stocks:
        get:
          tags:
            - Watchlists
          summary: Get all stocks in a watchlist
          security:
            - bearerAuth: []
          description: Returns all stocks for a specific watchlist owned by the authenticated user.
          parameters:
            - name: id
              in: path
              required: true
              description: Watchlist ID
              schema:
                type: integer
                example: 3
          responses:
            '200':
              description: List of stocks in the watchlist
              content:
                application/json:
                  schema:
                    type: array
                    items:
                      $ref: ../schemas/Stock.yaml
            '400':
              description: Invalid watchlist ID
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — user does not own this watchlist
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
            '404':
              description: Watchlist not found
              content:
                application/json:
                  schema:
                    $ref: ../components/NotFoundError.yaml
        post:
          tags:
            - Watchlists
          summary: Add a stock to a watchlist
          security:
            - bearerAuth: []
          description: Adds a stock to a watchlist if owned by the authenticated user.
          parameters:
            - name: id
              in: path
              required: true
              description: Watchlist ID
              schema:
                type: integer
                example: 3
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  required:
                    - stockId
                  properties:
                    stockId:
                      type: integer
                      example: 5
          responses:
            '201':
              description: Stock added to watchlist
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      message:
                        type: string
                        example: Stock AAPL added to watchlist
            '400':
              description: Invalid ID or validation error
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — cannot modify another user's watchlist
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
            '404':
              description: Watchlist or stock not found
              content:
                application/json:
                  schema:
                    $ref: ../components/NotFoundError.yaml
      /api/watchlists/{id}/stocks/{stockId}:
        delete:
          tags:
            - Watchlists
          summary: Remove a stock from a watchlist
          security:
            - bearerAuth: []
          description: Deletes a stock from the watchlist if owned by the authenticated user.
          parameters:
            - name: id
              in: path
              required: true
              description: Watchlist ID
              schema:
                type: integer
                example: 3
            - name: stockId
              in: path
              required: true
              description: Stock ID
              schema:
                type: integer
                example: 5
          responses:
            '204':
              description: Stock removed successfully
            '400':
              description: Invalid ID format
              content:
                application/json:
                  schema:
                    $ref: ../components/BadRequest.yaml
            '401':
              description: Not authenticated
              content:
                application/json:
                  schema:
                    $ref: ../components/Unauthorized.yaml
            '403':
              description: Forbidden — cannot modify another user's watchlist
              content:
                application/json:
                  schema:
                    $ref: ../components/Forbidden.yaml
            '404':
              description: Watchlist or stock not found
              content:
                application/json:
                  schema:
                    $ref: ../components/NotFoundError.yaml
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    User:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
          example: 1
        email:
          type: string
          example: user@example.com
        role:
          type: string
          enum:
            - USER
            - ADMIN
          example: USER
      required:
        - email
    Portfolio:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
          example: 10
        name:
          type: string
          example: Retirement Portfolio
        userId:
          type: integer
          example: 1
      required:
        - name
        - userId
    Stock:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
          example: 101
        symbol:
          type: string
          example: AAPL
        name:
          type: string
          example: Apple Inc.
        sector:
          type: string
          example: Technology
      required:
        - symbol
        - name
        - sector
    Watchlist:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
          example: 5
        name:
          type: string
          example: Tech Watchlist
        userId:
          type: integer
          example: 1
        watchlistStocks: null
        type: array
        description: Array of stocks in this watchlist
        items:
          type: object
          properties:
            stockId:
              type: integer
              example: 101
            symbol:
              type: string
              example: AAPL
      required:
        - name
        - userId
  responses:
    BadRequest:
      type: object
      properties:
        error:
          type: string
          example: Validation failed
        details:
          type: array
          items:
            type: string
          example:
            - email is required
    Unauthorized:
      type: object
      properties:
        error:
          type: string
          example: Not authenticated
    Forbidden:
      type: object
      properties:
        error:
          type: string
          example: 'Forbidden: insufficient permission'
    NotFoundError:
      type: object
      properties:
        error:
          type: string
          example: Resource not found
